<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<link rel="stylesheet" href="app.css">
<link rel="stylesheet" href="animate.css">
<link rel="stylesheet" href="bootstrap.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script>
<script src="echarts.min.js"></script>

<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/echarts.min.js"></script>-->
<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-gl/echarts-gl.min.js"></script>-->
<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts-stat/ecStat.min.js"></script>-->
<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/dataTool.min.js"></script>-->
<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/china.js"></script>-->
<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/map/js/world.js"></script>-->
<!--<script type="text/javascript" src="http://api.map.baidu.com/api?v=2.0&ak=ZUONbpqGBsYGXNIYHicvbAbM"></script>-->
<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/echarts/extension/bmap.min.js"></script>-->
<!--<script type="text/javascript" src="http://echarts.baidu.com/gallery/vendors/simplex.js"></script>-->

<body>
    <div id="app" @mousemove="updateXY">
        <!--<div id="body_image">-->
            <!--&lt;!&ndash;<img src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcREh9IWbEiMlCSM0SBvu53d_SLBGpDsKHjlL_IdkvTHnJ9GUghm" alt="">&ndash;&gt;-->
        <!--</div>-->
        <div id="header">
            <div id="header_content" @click="menu_click">
                <img src="http://assets.stickpng.com/thumbs/588a64cdd06f6719692a2d0d.png" alt="">
            </div>
            <!--<div id="header_bar">-->
            <!--<ul>-->
            <!--<li><router-link to="/main">Main</router-link></li>-->
            <!--<li><router-link to="/demo1">Demo1</router-link></li>-->
            <!--<li><router-link to="/demo2">Demo2</router-link></li>-->
            <!--<li><router-link to="/demo3">Demo3</router-link></li>-->
            <!--</ul>-->
            <!--</div>-->

            <h2 class="glyphicon-header" style="float: right; margin-top: 30px">Job statistic analysis</h2>
        </div>
        <div style="clear: both"></div>
        <div @click="hide_menu">
            <!--<router-view></router-view>-->
            <demo1 id="demo1_content" :demo_status="obj"></demo1>
            <demo3 id = "demo3_content" class="content" :demo_status="obj"></demo3>
        </div>
        <!--<transition enter-active-class="animated slideInLeft" leave-active-class="animated slideOutLeft">-->
            <!--&lt;!&ndash;<div id="nav_bar" v-show="mouse_X < 100 || menu_show">&ndash;&gt;-->
            <!--<div id="nav_bar" v-show=" menu_show">-->
                <!--<ul>-->
                    <!--&lt;!&ndash;<li>&ndash;&gt;-->
                        <!--&lt;!&ndash;<router-link to="/main">&ndash;&gt;-->
                            <!--&lt;!&ndash;<img class="nav_img" src="https://www.shareicon.net/download/2017/01/31/877061_miscellaneous_512x512.png" alt="">&ndash;&gt;-->
                        <!--&lt;!&ndash;</router-link>&ndash;&gt;-->
                    <!--&lt;!&ndash;</li>&ndash;&gt;-->
                    <!--<li>-->
                        <!--<router-link to="/demo1">-->
                            <!--<img class="nav_img" src="https://png.icons8.com/color/1600/australia-country.png" alt="">-->
                        <!--</router-link>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<router-link to="/demo2">-->
                            <!--<img class="nav_img" src="http://www.free-icons-download.net/images/three-dimensional-pie-chart-icon-31330.png" alt="">-->
                        <!--</router-link>-->
                    <!--</li>-->
                    <!--<li>-->
                        <!--<router-link to="/demo3">-->
                            <!--<img class="nav_img" src="https://cdn0.iconfinder.com/data/icons/purple-set/512/rise_trend_stats_graph_increase_barchart-512.png" alt="">-->
                        <!--</router-link>-->
                    <!--</li>-->
                <!--</ul>-->
            <!--</div>-->
        <!--</transition>-->

        <!--<div id="picture" style="width: 600px;height: 400px"></div>-->

        <br>
        <hr>
        <hr>
        <!--<canvas id="can_demo2"></canvas>-->
        <!--<canvas id="can_demo2"></canvas>-->
    </div>

    <script src="vue.js"></script>
    <script src="vue-router.js"></script>
    <script src="vue-resource.js"></script>
    <script src="jquery-3.2.1.js"></script>
    <script>
        $.ajaxSetup({
            async: false
        });
        var main = {
            template: `
<div id="main">
    <ul>
    <li>
        <router-link to="/demo1"><div class="items">
            <img class="item_img" src="https://www.excel-easy.com/smi/examples/line-chart.png" alt="">
        </div></router-link></li>
    <li>
        <router-link to="/demo2"><div class="items">
            <img class="item_img" src="https://canvasjs.com/wp-content/uploads/images/gallery/javascript-charts/column/javascript-column-charts-graphs.png" alt="">
        </div></router-link>
    </li>
    <li>
        <router-link to="/demo3"><div class="items">
            <img class="item_img" src="https://docs.microsoft.com/en-us/sql/reporting-services/report-builder/media/report-builder-quick-pie-chart.png?view=sql-server-2017" alt="">

        </div></router-link>
    </li>
    <li><div class="items"></div></li>
    <li><div class="items"></div></li>
    <li><div class="items"></div></li>
    </ul>
</div>
`
        };

        var demo1 = {
            data: function () {
                return {
                    str: "",
                    map_color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090',
                        '#fdae61', '#f46d43', '#d73027', '#a50026'
                    ],
                    map_value: [{
                            name: 'Alabama',
                            value: 50
                        },
                        // {name: 'Alaska', value: 731449},
                        {
                            name: 'Arizona',
                            value: 4
                        }
                    ],
                    locations: {
                        'aa': [145.52, -24.35],
                        'bb': [150, -33.65],
                        'cc': [136.37, -31.13],
                        'Sydney': [136.37, -31.13],
                        'dd': [150.65, -28.01]
                    },
                    data_val: [],
                    city_name: "",
                    citys: [],
                    rec_citys: [],
                    status: "au",
                    city_info:[],
                    curr_index:-1,
                    city_title:"",
                    country_title:"Australia overall job information"
                };
            },
            props:['demo_status'],
            template: `<transition enter-active-class="animated zoomInDown" >
                    <div>
                        <h2>Jobs by Location</h2>
                        <input class="input_bar" type="text" @keyup="get_rec" v-model="city_name" @focus="new_input">

                        <button class="btn btn-primary" @click="city_push">Input</button>
                        <button class="btn btn-clear" @click="clear_all">Clear</button>
                        <button class="btn btn-success input_button" @click="show_au_example">AU</button>
                        <button class="btn btn-danger input_button2" @click="show_uk_example">UK</button>
                        <div id="rec_city">
                            <ul class="rec_list">
                                <li v-for="(item,index) in rec_citys" :class="{hilight:index == curr_index}" @click="choose_city">{{item}}</li>
                                <div style="clear: both"></div>
                            </ul>
                        </div>
                        <div id="city_click">
                        <ul id="city_list">
                            <!--<li v-for="item in citys" @click="delete_city">{{item}}</li>-->
                            <li v-for="item in citys" @click="delete_city">
                                <button class="btn btn-info">{{item.name}}</button>
                            </li>
                        </ul>
                        </div>
                        <br>
                        <!--<div id="city_content">{{city_name}}</div>-->
                        <div id="picture" style="width: 100%;height: 600px"></div>
                        <div id="picture_2" style="width: 100%;height: 550px"></div>
                        <div id="data_table">
                            <h3 v-show="city_title.length != 0">City:{{city_title}}</h3>
                            <h3 v-show="city_title.length == 0">{{country_title}}</h3>
                            <table class="table table-striped table-bordered table-hover table-condensed">
                                <thead>
                                    <tr>
                                        <th>No.</th>
                                        <th>Title</th>
                                        <th>Job amount</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="success">
                                        <!--<th>1</th>-->
                                        <!--<th>Teacher</th>-->
                                        <!--<th>599</th>-->
                                    <!--</tr>-->
                                    <tr v-for="(item,index) in city_info">
                                        <th>{{index + 1}}</th>
                                        <th>{{item[0]}}</th>
                                        <th>{{item[1]}}</th>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <!--<img src="https://www.excel-easy.com/smi/examples/line-chart.png" alt="">-->
                        <!--<button @click="testb()">TEST</button>-->
                        <!--<div>{{demo_status.demo1_status}}</div>-->
                    </div>
                  </transition>`,
            mounted:function () {
                console.log("33333");
                this.show_au();
                this.$http.get("http://127.0.0.1:5000/industryAu"   ).then(function (value) {
                    console.log(value.body.Data);
                    this.city_info = value.body.Data;
                });
            },
            methods: {

                test_input: function () {
                    // console.log(this.city_name);
                },
                testb: function () {
                    this.$http.jsonp("https://sp0.baidu.com/5a1Fazu8AA54nxGko9WTAnF6hhy/su", {
                        params: {
                            wd: "a"
                        },
                        jsonp: "cb"
                    }).then(function (value) {
                        //this.arr = value.body.s;
                        // console.log(value);
                        this.str = value.body.s;
                        // console.log(this.str);
                    })
                },
                new_input:function () {
                    this.curr_index = -1;
                },
                show_overall:function () {

                },
                city_push: function () {
                    console.log(this.city_name);
                    for (let i in this.citys) {
                        if (this.city_name == this.citys[i].name){
                            return;
                        }

                    }
                    console.log("222222");
                    if (this.status == "au") {
                        this.city_name = $.trim(this.city_name);
                        // this.city_name = this.city_name.replace(/(\s*$)/g, "");
                        if (this.city_name == "Dubbo") {
                            console.log("correct");
                        }
                        if (this.city_name == "Dubbo ") {
                            console.log("not correct");

                        }
                        this.$http.get("http://localhost:5000/city_au/" + this.city_name).then(function (value) {
                            console.log(value.body);
                            // console.log("####");
                            // console.log(value.body.data[0].name);
                            // console.log(this.citys);
                            let attr = value.body.data[0].name;
                            // console.log(value.body.location[attr]);
                            this.citys.push(Object(value.body.data[0]));
                            this.locations[value.body.data[0].name] = value.body.location[attr];
                            console.log(this.citys);
                            console.log("------------------------------");
                            // console.log(this.locations);
                            this.show_au();
                        });
                        this.$http.get("http://127.0.0.1:5000/informationau/" + this.city_name).then(function (value) {
                            console.log(value.body.Data);
                            this.city_info = value.body.Data;
                            this.city_title = this.city_name;
                        });
                    } else {
                        this.$http.get("http://localhost:5000/city_uk/" + this.city_name).then(function (value) {
                            // console.log(value.body);
                            // console.log("####");
                            // console.log(value.body.data[0].name);
                            // console.log(this.citys);
                            let attr = value.body.data[0].name
                            // console.log(value.body.location[attr]);
                            this.citys.push(Object(value.body.data[0]));
                            this.locations[value.body.data[0].name] = value.body.location[attr];
                            // console.log(this.citys);
                            // console.log("----");
                            // console.log(this.locations);
                            this.show_map();
                        });
                        this.$http.get("http://127.0.0.1:5000/informationuk/" + this.city_name).then(function (value) {
                            console.log(value.body.Data);
                            this.city_info = value.body.Data;
                        });
                    }
                },
                delete_city: function (e) {
                    // console.log(e.target.innerText);
                    // console.log(this.citys);
                    let city_name = e.target.innerText.replace(/(^\s*)|(\s*$)/g, "");
                    // console.log(city_name == "Northam");
                    for (let i in this.citys) {
                        if (this.citys[i].name.replace(/(^\s*)|(\s*$)/g, "") == city_name) {
                            console.log('44444');
                            this.citys.splice(i, 1);
                        }
                    }
                    // console.log(this.status);
                    if (this.status == "au") {

                        this.show_au();
                    } else {
                        this.show_map();
                    }
                },
                delete_city_data: function (e) {

                    for (let i in this.data_val) {
                        if (this.data_val[i].name == e.target.innerText) {
                            console.log('44444');
                            this.data_val.splice(i, 1);
                        }
                    }
                },
                get_rec: function (e) {
                    console.log("222");
                    if (e.keyCode == 40) {
                        console.log("x");
                        // ／／$("#rec_city ul li").eq(this.curr_index).css("background-color","lightgrey").siblings().css("background-color","white");
                        if (this.curr_index < this.rec_citys.length - 1) {
                            this.curr_index += 1;
                        }
                        console.log(this.curr_index);
                        console.log(this.rec_citys);
                        return;
                    }
                    if (e.keyCode == 38) {
                        console.log("x");

                        if (this.curr_index > 0) {
                            this.curr_index -= 1;
                        }
                        console.log(this.curr_index);
                        // $("#rec_city ul li").eq(this.curr_index).css("background-color","lightgrey").siblings().css("background-color","white");

                        return;
                    }
                    if (e.keyCode == 13) {
                        this.city_name = $("#rec_city ul li").eq(this.curr_index).text();
                        this.city_push();

                        $("#rec_city").hide();
                        // $("#hilight").hide();
                        return;

                    }
                    if (this.status == "au") {
                        this.$http.get("http://localhost:5000/city_job_au/" + this.city_name).then(function (
                            value) {
                            console.log(value.body.City);
                            this.rec_citys = value.body.City;
                        });
                        $("#rec_city").show();
                    } else {
                        this.$http.get("http://localhost:5000/city_job_uk/" + this.city_name).then(function (
                            value) {
                            console.log(value.body.City);
                            this.rec_citys = value.body.City;
                        });
                        $("#rec_city").show();
                    }

                },
                // rec_move:function (e) {
                //     console.log(e);
                // },
                clear_all: function () {
                    this.citys = [];
                    if (this.status == "au") {
                        this.show_au();
                    } else {
                        this.show_map();
                    }
                },
                choose_city: function (e) {
                    console.log(e.target.innerText);
                    this.city_name = e.target.innerText;
                    console.log("5555533");
                    $("#rec_city").hide();

                },
                // rec_input_hide:function () {
                //     this.choose_city(e);
                //     $("#rec_city").hide();
                //     console.log("5555");
                //
                // },
                show_au_example: function () {
                    // if (this.citys.length == 0) {
                    this.country_title = "Australia overall job information";
                    this.city_title = ""
                    Vm.$emit("trans_data",{'Male_AU':true, 'Male_UK':false, 'Female_AU':true,'Female_UK':false});
                    this.demo_status.demo1_status = "AU";
                    this.status = "au";
                    $.ajax({
                        url: "http://localhost:5000/city_job_au",
                        type: "get",
                        dataType: "json",
                        async: false,

                        success: function (result) {
                            // console.log(result.data);
                            console.log(result);
                            var rec_data = [];
                            console.log(result.location);
                            for (let i = 0; i < 2; i++) {
                                rec_data.push(Object(result.location[i]));
                                console.log(typeof result.location[i]);
                            }

                            console.log('------2222----');
                            console.log(rec_data);
                            // console.log(data_val);

                            data_val = result.data;
                            geo_val = result.location;
                            console.log(geo_val);
                            console.log('----------');
                            // console.log(data_val);
                            // console.log(result.location);
                            // console.log(geo_val);


                        }
                    });
                    this.locations = geo_val;
                    this.citys = data_val;
                    console.log("################");
                    this.show_au();
                    this.$http.get("http://127.0.0.1:5000/industryAu"   ).then(function (value) {
                        console.log(value.body.Data);
                        this.city_info = value.body.Data;
                    });
                },
                show_uk_example: function () {
                    this.country_title = "England overall job information";
                    this.city_title = ""
                    Vm.$emit("trans_data",{'Male_AU':false, 'Male_UK':true, 'Female_AU':false,'Female_UK':true});
                    this.demo_status.demo1_status = "UK";
                    this.$emit("domo1-msg","uk");
                    // if (this.citys.length == 0) {
                    this.status = "uk";
                    $.ajax({
                        url: "http://localhost:5000/city_job_uk",
                        type: "get",
                        dataType: "json",
                        async: false,

                        success: function (result) {
                            var rec_data = [];
                            for (let i = 0; i < 2; i++) {
                                rec_data.push(Object(result.location[i]));
                                console.log(typeof result.location[i]);
                            }
                            data_val = result.data;
                            geo_val = result.location;


                        }
                    });
                    this.locations = geo_val;
                    this.citys = data_val;
                    this.show_map();
                    this.$http.get("http://127.0.0.1:5000/industryUk"   ).then(function (value) {
                        console.log(value.body.Data);
                        this.city_info = value.body.Data;
                    });
                },
                show_map: function () {
                    console.log(this.map_value);
                    map_value = this.map_value;
                    var map_color = this.map_color;
                    var dom = document.getElementById("picture_2");

                    $("#picture_2").show();
                    $("#picture").hide();
                    var myChart = echarts.init(dom);
                    var app = {};
                    option = null;
                    myChart.showLoading();

                    // var geo_val = this.locations;
                    console.log(this.locations);
                    var geo_val;
                    // var data_val = this.data_val;
                    var data_val = "222";
                    console.log('-----');
                    // console.log(geo_val);
                    // console.log(data_val)
                    console.log('------$$$$$$$-------');
                    console.log(this.locations);
                    this.$http.get("http://localhost:5000/city_job_uk", {
                        emulateJSON: true
                    }).then(function (value) {
                        //this.arr = value.body.s;

                        console.log("111111");
                        console.log(value.body.location);
                        console.log(geo_val);
                        var gee = Object(value.body.location);
                        console.log(gee);
                        // geo_val = Object(value.body.location);
                        // data_val = value.body.data;
                        // this.str = value.body.s;
                        // console.log(this.str);
                    }).catch(function (reason) {
                        console.log(reason);
                    });
                    data_val = this.citys;
                    geo_val = this.locations;
                    // }
                    console.log('------$$$$$$$-------');

                    console.log(data_val);


                    $.get('map/England.json', function (geoJson) {

                        myChart.hideLoading();

                        echarts.registerMap('England', geoJson);
                        geoCoordMap = geo_val;
                        data = data_val;
                        var maxSize4Pin = 150,
                            minSize4Pin = 40;
                        var max = 10000,
                            min = 100; // todo
                        var convertData = function (data) {
                            var res = [];
                            console.log(data);
                            for (var i = 0; i < data.length; i++) {
                                var geoCoord = geoCoordMap[data[i].name];
                                if (geoCoord) {
                                    res.push({
                                        name: data[i].name,
                                        value: geoCoord.concat(data[i].value)
                                    });
                                }
                            }
                            return res;
                        };
                        console.log(convertData(data));
                        myChart.setOption(option = {
                            title: {
                                text: 'England Job distribution',
                                subtext: '',
                                sublink: 'http://zh.wikipedia.org/wiki/%E9%A6%99%E6%B8%AF%E8%A1%8C%E6%94%BF%E5%8D%80%E5%8A%83#cite_note-12'
                            },
                            tooltip: {
                                trigger: 'item',
                                formatter: function (params) {
                                    if (typeof (params.value)[2] == "undefined") {
                                        return params.name + ' : ' + params.value;
                                    } else {
                                        return params.name + ' : ' + params.value[2];
                                    }
                                }
                            },

                            toolbox: {
                                show: true,
                                orient: 'vertical',
                                left: 'right',
                                top: 'center',
                                feature: {
                                    dataView: {
                                        readOnly: false
                                    },
                                    restore: {},
                                    saveAsImage: {}
                                }
                            },
                            visualMap: {
                                min: 1000,
                                max: 6000,
                                type: "continuous",
                                text: ['High', 'Low'],
                                realtime: false,
                                calculable: true,
                                inRange: {
                                    color: ['lightskyblue', 'yellow', 'orangered']
                                }
                            },
                            geo: {
                                show: true,
                                map: "England",
                                mapType: 'England', // 自定义扩展图表类型
                                zoom: 1.5,
                                center:[-2.52, 53.35],
                                scaleLimit: {
                                    min: 1.2,
                                    max: 2.8
                                },
                                label: {
                                    normal: {
                                        show: false
                                    },
                                    emphasis: {
                                        show: true,
                                    }
                                },
                                roam: true,
                                itemStyle: {
                                    normal: {
                                        areaColor: '#bcb7b5',
                                        borderColor: '#3B5077',
                                    },
                                    emphasis: {
                                        areaColor: '#2B91B7',
                                    }
                                }
                            },
                            series: [{
                                    name: 'credit_pm2.5',
                                    type: 'scatter',
                                    coordinateSystem: 'geo',
                                    data: convertData(data),
                                    symbolSize: function (val) {
                                        return val[2] / 10000;
                                    },
                                    label: {
                                        normal: {
                                            formatter: '{b}',
                                            position: 'right',
                                            show: true,
                                            textStyle: {
                                                color: 'black',
                                                fontSize: 12,
                                            }
                                        },
                                        emphasis: {
                                            show: true
                                        }
                                    },
                                    itemStyle: {
                                        normal: {
                                            color: '#05C3F9'
                                        }
                                    }
                                },

                                {
                                    name: '点',
                                    type: 'scatter',
                                    coordinateSystem: 'geo',
                                    symbol: 'pin',
                                    symbolSize: function (val) {
                                        var a = (maxSize4Pin - minSize4Pin) / (max -
                                            min);
                                        var b = minSize4Pin - a * min;
                                        b = maxSize4Pin - a * max;
                                        return a * val[2] + b;
                                    },
                                    label: {
                                        normal: {
                                            show: true,
                                            formatter: function (val) {
                                                // console.log(val.value);
                                                return val.value[2];
                                            },
                                            textStyle: {
                                                color: '#fff',
                                                fontSize: 10,
                                            }
                                        }
                                    },
                                    itemStyle: {
                                        normal: {
                                            color: '#F62157', //标志颜色
                                        }
                                    },
                                    zlevel: 6,
                                    data: convertData(data),
                                }
                            ]
                        });

                    });
                    var that = this;
                    myChart.on('click', function (params) {
                        // var city = params.name;
                        // loadChart(city);
                        that.city_title = params.data.name;
                        if (params.seriesType == "scatter") {
                            console.log("http://127.0.0.1:5000/informationuk/" + params.data.name);
                            that.$http.get("http://127.0.0.1:5000/informationuk/" + params.data.name).then(function (value) {
                                console.log(value);
                                that.city_info = value.body.Data;
                            });
                        }

                    });

                },
                show_au: function () {
                    console.log(this.map_value);
                    map_value = this.map_value;
                    var map_color = this.map_color;
                    var dom = document.getElementById("picture");
                    $("#picture").show();
                    $("#picture_2").hide();
                    var myChart = echarts.init(dom);
                    var app = {};
                    option = null;
                    myChart.showLoading();

                    // var geo_val = this.locations;
                    console.log(this.locations);
                    var geo_val;
                    // var data_val = this.data_val;
                    var data_val = "222";
                    console.log('-----');
                    // console.log(geo_val);
                    // console.log(data_val)
                    console.log('------$$$$$$$-------');
                    console.log(this.locations);
                    this.$http.get("http://localhost:5000/city_job_au", {
                        emulateJSON: true
                    }).then(function (value) {
                        //this.arr = value.body.s;

                        console.log("111111");
                        console.log(value.body.location);
                        console.log(geo_val);
                        var gee = Object(value.body.location);
                        console.log(gee);
                        // geo_val = Object(value.body.location);
                        // data_val = value.body.data;
                        // this.str = value.body.s;
                        // console.log(this.str);
                    }).catch(function (reason) {
                        console.log(reason);
                    });
                    data_val = this.citys;
                    geo_val = this.locations;
                    // }
                    console.log('------$$$$$$$-------');

                    console.log(data_val);


                    $.get('map/Australia.json', function (geoJson) {

                        myChart.hideLoading();

                        echarts.registerMap('Australia', geoJson);
                        geoCoordMap = geo_val;
                        data = data_val;
                        var maxSize4Pin = 100,
                            minSize4Pin = 40;
                        var max = 10000,
                            min = 100; // todo
                        var convertData = function (data) {
                            var res = [];
                            console.log(data);
                            for (var i = 0; i < data.length; i++) {
                                var geoCoord = geoCoordMap[data[i].name];
                                if (geoCoord) {
                                    res.push({
                                        name: data[i].name,
                                        value: geoCoord.concat(data[i].value)
                                    });
                                }
                            }
                            return res;
                        };
                        console.log(convertData(data));
                        myChart.setOption(option = {
                            title: {
                                text: 'Australis Job distribution',
                                subtext: '',
                                sublink: 'http://zh.wikipedia.org/wiki/%E9%A6%99%E6%B8%AF%E8%A1%8C%E6%94%BF%E5%8D%80%E5%8A%83#cite_note-12'
                            },
                            tooltip: {
                                trigger: 'item',
                                formatter: function (params) {
                                    console.log(params);
                                    if (typeof (params.value)[2] == "undefined") {
                                        return params.name + ' : ' + params.value;
                                    } else {
                                        return params.name + ' : ' + params.value[2];
                                    }
                                },
                                show:false
                            },

                            toolbox: {
                                show: true,
                                orient: 'vertical',
                                left: 'right',
                                top: 'center',
                                feature: {
                                    dataView: {
                                        readOnly: false
                                    },
                                    restore: {},
                                    saveAsImage: {}
                                }
                            },
                            visualMap: {
                                min: 100,
                                max: 10000,
                                type: "continuous",
                                text: ['High', 'Low'],
                                realtime: false,
                                calculable: true,
                                inRange: {
                                    color: ['lightskyblue', 'yellow', 'orangered']
                                }
                            },
                            geo: {
                                show: true,
                                map: "Australia",
                                mapType: 'Australia', // 自定义扩展图表类型
                                zoom: 1.8,
                                center:[135.52, -24.35],
                                scaleLimit: {
                                    min: 0.8,
                                    max: 2.8
                                },
                                label: {
                                    normal: {
                                        show: false
                                    },
                                    emphasis: {
                                        show: true,
                                    }
                                },
                                roam: true,
                                itemStyle: {
                                    normal: {
                                        areaColor: '#bcb7b5',
                                        borderColor: '#3B5077',
                                    },
                                    emphasis: {
                                        areaColor: '#2B91B7',
                                    }
                                }
                            },
                            series: [{
                                    name: 'credit_pm2.5',
                                    type: 'scatter',
                                    coordinateSystem: 'geo',
                                    data: convertData(data),
                                    symbolSize: function (val) {
                                        return val[2] / 10000;
                                    },
                                    label: {
                                        normal: {
                                            formatter: '{b}',
                                            position: 'right',
                                            show: true,
                                            textStyle: {
                                                color: 'black',
                                                fontSize: 12,
                                            }

                                        },
                                        emphasis: {
                                            show: true
                                        }
                                    },
                                    itemStyle: {
                                        normal: {
                                            color: '#05C3F9'
                                        }
                                    }
                                },
                                {
                                    type: 'map',
                                    map: 'Australia',
                                    geoIndex: 0,
                                    zoom: 3,
                                    aspectScale: 0.75, //长宽比
                                    showLegendSymbol: false, // 存在legend时显示
                                    label: {
                                        normal: {
                                            show: false
                                        },
                                        emphasis: {
                                            show: false,
                                            textStyle: {
                                                color: '#fff'
                                            }
                                        }
                                    },
                                    roam: true,
                                    itemStyle: {
                                        normal: {
                                            areaColor: '#031525',
                                            borderColor: '#3B5077',
                                        },
                                        emphasis: {
                                            areaColor: '#2B91B7'
                                        }
                                    },
                                    animation: false,
                                    data: data
                                },
                                {
                                    name: '点',
                                    type: 'scatter',
                                    coordinateSystem: 'geo',
                                    symbol: 'pin',
                                    symbolSize: function (val) {
                                        var a = (maxSize4Pin - minSize4Pin) / (max -
                                            min);
                                        var b = minSize4Pin - a * min;
                                        b = maxSize4Pin - a * max;
                                        return a * val[2] + b;
                                    },
                                    label: {
                                        normal: {
                                            show: true,
                                            formatter: function (val) {
                                                // console.log(val.value);
                                                return val.value[2];
                                            },
                                            textStyle: {
                                                color: '#fff',
                                                fontSize: 10,
                                            }
                                        }
                                    },
                                    itemStyle: {
                                        normal: {
                                            color: '#F62157', //标志颜色
                                        }
                                    },
                                    zlevel: 6,
                                    data: convertData(data),
                                }
                            ]
                        });
                    });
                    var that = this;
                    myChart.on('click', function (params) {
                        // var city = params.name;
                        // loadChart(city);
                        that.city_title = params.data.name;
                        if (params.seriesType == "scatter") {
                            console.log("http://127.0.0.1:5000/informationau/" + params.data.name);
                            that.$http.get("http://127.0.0.1:5000/informationau/" + params.data.name).then(function (value) {
                                console.log(value);
                                that.city_info = value.body.Data;
                            });
                        }

                    });
                }

            }

        };
        var demo2 = {
            data: function () {
              return {
                  url_au :"http://127.0.0.1:5000/industryAu",
                  url_uk :"http://127.0.0.1:5000/industryUk",
                  show_list:[true,true,true,true,false,false,false,false,false,false,false,false,false,false,false,false]
              }
            },
            template: `<transition enter-active-class="animated zoomInDown" >
                    <div >
                        <h1>Second Demo</h1>
                        <!--<img src="https://canvasjs.com/wp-content/uploads/images/gallery/javascript-charts/column/javascript-column-charts-graphs.png" alt="">-->
                        <button class="btn btn-primary" @click="show_all">SHOW</button>
                        <div id="demo2_1" style="height:600px;width:100%"></div>
                        <!--<div id="demo2_2" style="height:500px;width:100%"></div>-->
                        <canvas id="can_demo2"></canvas>
                    </div>
                  </transition>`,
            methods: {
                show_all:function (){
                    this.show_can(this.url_au,"demo2_1","Australia");
                    //this.show_can(this.url_uk,"demo2_2","UK");

                },
                show_can: function (url, dom_id, graph_name) {
                    console.log(url);
                    let dom = document.getElementById(dom_id);
                    var myChart = echarts.init(dom);
                    console.log("22");
                    var dataStyle = {
                        normal: {
                            label: {
                                show: false
                            },
                            labelLine: {
                                show: false
                            },
                            shadowBlur: 40,
                            shadowColor: 'rgba(40, 40, 40,0.5)',
                        }
                    };
                    var category;
                    var cat_data
                    $.ajax({
                        url: this.url_au,
                        type: "get",
                        dataType: "json",
                        async: false,

                        success: function (result) {
                           category = result.data;
                           cat_data = result.value;


                        }
                    });
                    var uk_cat
                    var uk_data
                    $.ajax({
                        url: this.url_uk,
                        type: "get",
                        dataType: "json",
                        async: false,

                        success: function (result) {
                            uk_cat = result.data;
                            uk_data = result.value;


                        }
                    });
                    console.log(category);
                    console.log(cat_data);
                    myChart.setOption(option = {
                        // backgroundColor: 'white',
                        color: ['#ffdb6d', '#89c9e1', '#ce77b6', '#f29e29'],

                        title: {
                            text: graph_name,
                            x: 'center',
                            top: '92%',
                            textStyle: {
                                color: '#6c6c6c'
                            }
                        },

                        tooltip: {
                            trigger: 'item',
                            formatter: "{a} <br/>{b}: {c} ({d}%)"
                        },
                        legend: {
                            orient: 'vertical',
                            x: '2%',
                            top: '0',
                            data: category,
                            selected: {"Accounting":false}
                        },
                        series: [{
                            name: 'Job',
                            type: 'pie',
                            radius: ['50%', '70%'],
                            center: ['60%', '40%'],
                            avoidLabelOverlap: false,
                            itemStyle: dataStyle,
                            label: {
                                normal: {
                                    show: false,
                                    color:"red",
                                    x:"100",
                                    position: 'right'
                                },
                                emphasis: {
                                    show: true,
                                    formatter: function(param) {
                                        return  param.percent.toFixed(1) + '%' + '(AU)';
                                    },
                                    textStyle: {
                                        fontSize: '20',
                                        fontWeight: 'bold'
                                    }
                                }
                            },
                            labelLine: {
                                normal: {
                                    lineStyle: {
                                        color: 'red'
                                    },
                                    show: false,
                                    length: 50,
                                    length2: 30
                                },
                                emphasis: {
                                    lineStyle: {
                                        color: 'red'
                                    },
                                    show: true,
                                    length: 50,
                                    length2: 30
                                }
                            },
                            data: cat_data
                        },
                            {
                                name: 'Job',
                                type: 'pie',
                                radius: ['30%', '50%'],
                                center: ['60%', '40%'],
                                avoidLabelOverlap: false,
                                left:"100px",
                                itemStyle: dataStyle,
                                label: {
                                    normal: {
                                        show: false,
                                        color:"blue",
                                        position: 'left'

                                    },
                                    emphasis: {
                                        show: true,
                                        formatter: function(param) {
                                            return  param.percent.toFixed(0) + '%' + '(UK)';
                                        },
                                        textStyle: {
                                            fontSize: '20',
                                            fontWeight: 'bold'
                                        }
                                    }
                                },
                                labelLine: {
                                    normal: {
                                        lineStyle: {
                                            color: 'red'
                                        },
                                        show: false,
                                        length: 80,
                                        length2: 50,
                                        zlevel:100
                                    },
                                    emphasis: {
                                        lineStyle: {
                                            color: 'red'
                                        },
                                        show: true,
                                        length: 50,
                                        length2: 30
                                    }
                                },
                                data: uk_data
                            }]
                    });


                }
            }
        }
        var demo3 = {
            template: `<transition enter-active-class="animated zoomInDown" >
                    <div>
                        <h2>Weekly Work Hours</h2>
                        <!--<button class="btn btn-primary" @click="show_can">SHOW</button>-->
                        <div id="container1" style="height:500px;width:1500px"></div>
                    </div>
                  </transition>`,
            data:function () {
                return {
                    tag_status: this.demo_status.demo1_status,
                    a:""
                }
            },
            props:['demo_status'],
            updated:function () {
                console.log("change");
            },
            methods: {
                show_can: function () {
                    //console.log(this.tag_status);
                    var dom = document.getElementById("container1");
                    var myChart = echarts.init(dom);
                    var app = {};
                    var status = this.tag_status;
                    option = null;
                    app.title = '正负条形图';
                    $.ajax({
                        url: "http://localhost:5000/work_hours",
                        type: "get",
                        dataType: "json",
                        async: false,

                        success: function (result) {
                            //console.log(this.dome_status.demo1_status);
                            option = {
                                tooltip: {
                                    trigger: 'axis',
                                    axisPointer: { // 坐标轴指示器，坐标轴触发有效
                                        type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                                    },
                                    formatter:function(params){ // 改鼠标悬浮提示值格式
                                        var colorSpan = color => '<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:' + color + '"></span>';
                                        let rez = params[0].name+"<br/>";
                                        params.forEach(item => {
                                            let num = 0;
                                            if (item.value > 0){
                                                num = item.value;
                                            }else{
                                                num = -item.value;
                                            }
                                            let strItem = colorSpan(item.color) + item.seriesName+ ' : ' +  num + " hrs"+ "<br/>";
                                            rez += strItem;
                                        });
                                        return rez;
                                    }
                                },
                                legend: {
                                    data: ['Male_AU', 'Male_UK', 'Female_AU','Female_UK'],
                                    selected:status
                                },
                                grid: {
                                    left: '3%',
                                    right: '35%',
                                    bottom: '3%',
                                    containLabel: true
                                },
                                xAxis: [
                                {
                                    type : 'value',
                                    axisLabel:{
                                        formatter:function(value){
                                            if (value<0) {
                                                return -value;
                                            }else{
                                                return value;
                                            }
                                        }
                                    },
                                    name : 'hrs',
                                    nameLocation : 'end'

                                }],
                                yAxis: [{
                                    type: 'category',
                                    axisTick: {
                                        show: false
                                    },
                                    data: result.category
                                }],
                                series: [{
                                        name: 'Male_AU',
                                        type: 'bar',
                                        stack: 'Male',
                                        label: {
                                            normal: {
                                                show: true,
                                                position: 'inside',
                                                formatter: function (value) {
                                                    if(value.data<0){
                                                        return -value.data;
                                                    }
                                                }
                                            }
                                        },
                                        data: result.male_au
                                    },
                                    {
                                        name: 'Male_UK',
                                        type: 'bar',
                                        stack: 'Male',
                                        label: {
                                            normal: {
                                                show: true,
                                                position: 'inside'
                                            }
                                        },
                                        data: result.male_uk
                                    },
                                    {
                                        name: 'Female_AU',
                                        type: 'bar',
                                        stack: 'Female',
                                        label: {
                                            normal: {
                                                show: true,
                                                position: 'inside',
                                                formatter: function (value) {
                                                    if(value.data<0){
                                                        return -value.data;
                                                    }
                                                }
                                            }
                                        },
                                        data: result.female_au
                                    },
                                    {
                                        name: 'Female_UK',
                                        type: 'bar',
                                        stack: 'Female',
                                        label: {
                                            normal: {
                                                show: true,
                                                position: 'inside'
                                            }
                                        },
                                        data: result.female_uk
                                    }
                                ]
                            };
                            if (option && typeof option === "object") {
                                myChart.setOption(option, true);
                            }
                        }
                    });
                }
            },

            mounted(){
                this.show_can();
                Vm.$on("trans_data", function (a) {
                    // alert("1");
                    this.tag_status = a;
                    // console.log("###########################");
                    // console.log(this.tag_status);
                    //this.show_can();
                    // console.log("###########################");
                    var status = this.tag_status;
                    var dom = document.getElementById("container1");
                    var myChart = echarts.init(dom);
                    var app = {};
                    var status = this.tag_status;
                    option = null;
                    app.title = '正负条形图';
                    $.ajax({
                        url: "http://localhost:5000/work_hours",
                        type: "get",
                        dataType: "json",
                        async: false,

                        success: function (result) {
                            //console.log(this.dome_status.demo1_status);
                            option = {
                                tooltip: {
                                    trigger: 'axis',
                                    axisPointer: { // 坐标轴指示器，坐标轴触发有效
                                        type: 'shadow' // 默认为直线，可选为：'line' | 'shadow'
                                    },
                                    formatter:function(params){ // 改鼠标悬浮提示值格式
                                        var colorSpan = color => '<span style="display:inline-block;margin-right:5px;border-radius:10px;width:9px;height:9px;background-color:' + color + '"></span>';
                                        let rez = params[0].name+"<br/>";
                                        params.forEach(item => {
                                            let num = 0;
                                        if (item.value > 0){
                                            num = item.value;
                                        }else{
                                            num = -item.value;
                                        }
                                        let strItem = colorSpan(item.color) + item.seriesName+ ' : ' +  num + " hrs"+ "<br/>";
                                        rez += strItem;
                                    });
                                        return rez;
                                    }
                                },
                                legend: {
                                    data: ['Male_AU', 'Male_UK', 'Female_AU','Female_UK'],
                                    selected:status
                                },
                                grid: {
                                    left: '3%',
                                    right: '35%',
                                    bottom: '3%',
                                    containLabel: true
                                },
                                xAxis: [
                                    {
                                        type : 'value',
                                        axisLabel:{
                                            formatter:function(value){
                                                if (value<0) {
                                                    return -value;
                                                }else{
                                                    return value;
                                                }
                                            }
                                        },
                                        name : 'hrs',
                                        nameLocation : 'end'

                                    }],
                                yAxis: [{
                                    type: 'category',
                                    axisTick: {
                                        show: false
                                    },
                                    data: result.category
                                }],
                                series: [{
                                    name: 'Male_AU',
                                    type: 'bar',
                                    stack: 'Male',
                                    label: {
                                        normal: {
                                            show: true,
                                            position: 'inside',
                                            formatter: function (value) {
                                                if(value.data<0){
                                                    return -value.data;
                                                }
                                            }
                                        }
                                    },
                                    data: result.male_au
                                },
                                    {
                                        name: 'Male_UK',
                                        type: 'bar',
                                        stack: 'Male',
                                        label: {
                                            normal: {
                                                show: true,
                                                position: 'inside'
                                            }
                                        },
                                        data: result.male_uk
                                    },
                                    {
                                        name: 'Female_AU',
                                        type: 'bar',
                                        stack: 'Female',
                                        label: {
                                            normal: {
                                                show: true,
                                                position: 'inside',
                                                formatter: function (value) {
                                                    if(value.data<0){
                                                        return -value.data;
                                                    }
                                                }
                                            }
                                        },
                                        data: result.female_au
                                    },
                                    {
                                        name: 'Female_UK',
                                        type: 'bar',
                                        stack: 'Female',
                                        label: {
                                            normal: {
                                                show: true,
                                                position: 'inside'
                                            }
                                        },
                                        data: result.female_uk
                                    }
                                ]
                            };
                            if (option && typeof option === "object") {
                                myChart.setOption(option, true);
                            }
                        }
                    });
                })
            },
        };

        var routes = [{
                "path": "/main",
                component: main
            },
            {
                "path": "/demo1",
                component: demo1
            },
            {
                "path": "/demo2",
                component: demo2
            },
            {
                "path": "/demo3",
                component: demo3
            }
        ];

        var router = new VueRouter({
            routes
        });
        Vue.component("demo1",demo1);
        Vue.component("demo3",demo3);

        var Vm = new Vue();
        new Vue({
            //router,
            el: "#app",
            data: {
                title: "Comp 9021 demo",
                content: "Here is content",
                nav_bar: "Here is nva bar",
                mouse_X: 200,
                mouse_Y: 0,
                show_nav: false,
                menu_show: true,
                city_name: "",
                citys: [],
                obj: {
                    demo1_status:{'Male_AU':true, 'Male_UK':false, 'Female_AU':true,'Female_UK':false}
                }
            },
            methods: {
                updateXY: function (e) {
                    this.mouse_X = e.clientX;
                    this.mouse_Y = e.offsetY;
                    if (this.mouse_X < 100) {
                        this.menu_show = true;
                    }

                },
                menu_click: function () {
                    console.log("66666");
                    this.menu_show = true;
                },
                hide_menu: function () {
                    $("#rec_city").hide();
                    this.menu_show = false;
                }


            },
        })
    </script>
    <script>
    </script>
    <script src="app.js"></script>
</body>

</html>